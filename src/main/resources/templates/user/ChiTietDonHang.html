<!DOCTYPE html>
<html lang="en" xmlns:th="http:/www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/user/home}">
<head>
</head>
<body>
<div class="main-content" layout:fragment="content">
    <div class="page-content" ng-app="ctdh-app" ng-controller="ctdh-ctrl">
        <div class="container-fluid bg-white" >
            <div class="card-header">
                <h5 class="modal-title" id="donHangDetailTitle">Thông tin đơn hàng</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Mã đơn hàng</label>
                            <span class="form-control">{{donHang.ma}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Ngày đặt hàng</label>
                            <span class="form-control">{{donHang.ngayDatHang | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Phương thức thanh toán</label>
                            <span class="form-control">{{donHang.phuongThucThanhToan}}</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Tên người nhận</label>
                            <span class="form-control">{{donHang.tenNguoiNhan}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Số điện thoại</label>
                            <span class="form-control">{{donHang.soDienThoai}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>email</label>
                            <span class="form-control">{{donHang.email}}</span>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Thành phố</label>
                            <span class="form-control">{{donHang.thanhPhoName}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Quận huyện</label>
                            <span class="form-control">{{donHang.quanHuyenName}}</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label>Xã phường</label>
                            <span class="form-control">{{donHang.xaPhuongName}}</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="mb-3 col-6">
                        <label>Địa chỉ chi tiết</label>
                        <textarea class="form-control">{{donHang.diaChiChiTiet}}</textarea>
                    </div>
                    <div class="mb-3 col-6">
                        <label>Ghi chú</label>
                        <textarea class="form-control">{{donHang.ghiChu}}</textarea>
                    </div>
                </div>
                <hr>
                <div style="max-height: 220px;overflow-y: auto;">
                    <table id="datatable"
                           class="table table-striped table-hover dt-responsive  nowrap w-100">
                        <thead>
                        <tr style="position: sticky;
                                            top: 0;
                                            z-index: 1;
                                            background: white;">
                            <th>Sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Đơn giá</th>
                            <th>Giảm giá</th>
                            <th>Đơn giá sau giảm</th>
                            <th>Thành tiền</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="d in chiTietDonHang">
                            <td>
                                <div class="d-flex justify-content-start">
                                    <img src="/image/loadImage/product/{{d.anh}}"
                                         style="width: 100px; height: 70px;">
                                    <div>
                                        <p style="font-weight: bold;padding-left: 10px; ">{{d.sanPham}}</p>
                                        <i style="font-size: 10px;padding-left: 10px;">Size {{d.size}}</i>
                                    </div>
                                </div>
                            </td>
                            <td>{{d.soLuong}}</td>
                            <td>{{d.donGia | currency: "" : 1}} đ</td>
                            <td>{{d.donGia - d.donGiaSauGiam | currency: "" : 1}} đ</td>
                            <td>
                                <div class="d-flex justify-content-end">{{d.donGiaSauGiam | currency: "" : 1}} đ
                                </div>
                            </td>
                            <td>
                                <div class="d-flex justify-content-end">{{d.donGiaSauGiam * d.soLuong | currency: "" : 1}} đ
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <table class="table" style="    border-top: 1px solid black">
                    <tbody>
                    <tr>
                        <td>Tổng</td>
                        <td colspan="4">
                            <div class="d-flex justify-content-end">{{getTotalPrice() | currency: "" : 1}} đ
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Khuyến mãi</td>
                        <td colspan="4">
                            <div class="d-flex justify-content-end">
                                {{donHang.tienGiam == null ? 0 : donHang.tienGiam | currency: "" : 1}} đ
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Phí giao hàng</td>
                        <td colspan="4">
                            <div class="d-flex justify-content-end">
                                {{donHang.phiGiaoHang | currency: "" : 1}} đ
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Thành tiền</td>
                        <td colspan="4">
                            <div class="d-flex justify-content-end">
                                {{(getTotalPrice() + donHang.phiGiaoHang) - donHang.tienGiam | currency: "" : 1}} đ
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!--        <div class="card-footer">-->
            <!--            <button type="button" class="btn btn-secondary" data-dismiss="modal"-->
            <!--                    ng-click="closeModal('#donHangDetail')">Đóng-->
            <!--            </button>-->
            <!--        </div>-->
        </div>
    </div>
</div>
</body>
</html>